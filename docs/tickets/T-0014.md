# T-0014 — Booking widget y checkout alineados a Design System

Title: Booking widget y checkout alineados a Design System
Priority: B
Area: UX / Frontend
Owner Role: Planner / Implementer / Reviewer / QA

Problem (Evidence):
- Booking widget usa estilos inline con colores hardcoded y sin tokens (`/apps/web/src/app/book/[slug]/page.tsx`).
- Checkout público repite patrones inline y colores fuera de tokens (`/apps/web/src/app/book/[slug]/checkout/page.tsx`).
- Design System exige tokens, estados y microinteracciones definidos (`/docs/DESIGN_SYSTEM.md`).

Goal:
- Migrar booking/checkout a estilos con tokens y componentes base, mejorando consistencia Apple-like y a11y.

Scope (In/Out):
- In: CSS Modules/Tailwind con tokens, uso de `EventoraButton`, focus states y estados empty/error consistentes.
- Out: rediseño visual completo del funnel o cambios de backend.

Implementation Plan (≤15 bullets):
1. Extraer estilos inline a CSS Modules con tokens.
2. Reemplazar botones por `EventoraButton` y controles con estilos consistentes.
3. Añadir focus visible y aria-labels donde aplique.
4. Revisar estados loading/error/empty para cumplir design system.
5. Ajustar tipografía y spacing según tokens.
6. Validar contraste y mobile-first.

Files touched (expected):
- apps/web/src/app/book/[slug]/page.tsx
- apps/web/src/app/book/[slug]/checkout/page.tsx
- apps/web/src/app/book/[slug]/BookingWidget.module.css (nuevo)
- apps/web/src/app/book/[slug]/Checkout.module.css (nuevo)
- apps/web/src/app/components/ui/EventoraButton.tsx (si se requiere variante)

Acceptance Criteria (Given/When/Then):
1. Given cualquier estado del widget, When se renderiza, Then usa tokens del Design System y no inline styles.
2. Given un teclado, When el usuario navega inputs/botones, Then el foco es visible y consistente.
3. Given un error en API, When se muestra el mensaje, Then el estado cumple el patrón de error del Design System.
4. Given viewport móvil, When se usa el widget, Then no hay overflow ni texto cortado.

KPI Impact:
- time-to-cash (reducción de fricción), quality-only.

Risks & Dependencies:
- Dependencia de tokens definidos en `DESIGN_SYSTEM.md`.
- Requiere alinear con branding en `/EVENTORA_BRAND_GUIDELINES.md`.

Test Evidence Required:
- `npm run lint`
- `npm run typecheck`
- Manual: booking público + checkout en móvil y desktop.

Security & Tenant/RBAC Checks:
- [ ] No exponer datos sensibles en UI
- [ ] Mantener rutas públicas sin fuga de tokens

UX Checks:
- [ ] Tokens/consistencia
- [ ] Estados vacíos
- [ ] Loading/skeleton
- [ ] Accesibilidad (focus/aria)
